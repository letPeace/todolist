<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link th:rel="stylesheet" th:href="@{/webjars/bootstrap/5.2.0/css/bootstrap.min.css}" />
    </head>
    <body>

        <div class="container">

            <h1 class="text-center">Todolist Application</h1>

            <table class="table table-bordered">
                <thead class="thead-dark">
                    <tr>
                        <th>Actions</th>
                        <th>Id</th>
                        <th>Task</th>
                        <th>Completed</th>
                        <th>Created date</th>
                        <th>Modified date</th>
                        <th>Author</th>
                        <th>Category</th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="task : ${tasks}" th:class="${task.completed} ? |bg-white text-secondary| : |bg-light text-dark|">
                        <td>
                            <div class="btn btn-group-sm" role="group">
                                <a class="btn btn-outline-primary" th:href="@{/tasks/update/{id}(id=${task.id})}">Update</a>
                                <form th:action="@{/tasks/delete/{id}(id=${task.id})}" method="POST">
                                    <input class="btn btn-outline-danger" type="submit" value="Delete">
                                </form>
                            </div>
                        </td>
                        <td th:text="${task.id}"></td>
                        <td th:text="${task.text}"></td>
                        <td th:text="${task.completed}"></td>
                        <td th:text="${#strings.substring(#strings.replace(task.createdDate,'T',' '),0,19)}"></td>
                        <td th:text="${#strings.substring(#strings.replace(task.modifiedDate,'T',' '),0,19)}"></td>
                        <td th:text="${task.user}"></td>
                        <td th:text="${task.category}"></td>
                    </tr>
                </tbody>
            </table>

            <p><a class="btn btn-success" href="/tasks/create">Create a new task</a></p>
            <p><a class="btn btn-dark" href="/users/create">Sign up</a></p>
            <p><a class="btn btn-dark" href="/login">Sign in</a></p>
            <p><a class="btn btn-dark" href="/users">Users list</a></p>
            <p><a class="btn btn-dark" href="/tasks">Tasks list</a></p>
            <p><a class="btn btn-dark" href="/categories">Categories list</a></p>
            <form th:action="@{/logout}" method="POST">
                <input type="submit" value="Sign Out"/>
            </form>

        </div>

        <script th:src="@{/webjars/jquery/3.6.1/jquery.min.js}"></script>
        <script th:src="@{/webjars/bootstrap/5.2.0/js/bootstrap.min.js}"></script>

    </body>
</html>